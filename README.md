[TOC]

5. 스프링 웹 애플리케이션 만들기
===================

이 장에서 다룰 내용

- 요청을 스프링 컨트롤러에 매핑하기
- 파라미터 폼을 투명하게 바인딩하기
- 제출 폼 검증하기

> MVC 패턴을 기반으로 스프링 MVC는 스프링 프레임워크 자체와 긴밀한 연결 없이 유연한 웹 기반 애플리케이션을 만드는데 도움을 준다.

----------


5.1 스프링 MVC 시작하기
-------------

스프링 MVC가 클라이언트로부터 하나의 요청을 받아 컴포넌트을 통해 최종적인 결과를 만들어 다시 클라이언트로 돌려주기 위한 길이 어떻게 만드는지 살펴보자.
> 스프링 요청(request)을 디스패처 서블릿(dispatcher servlet), 핸들러 매핑(handler mapping), 컨트롤러, 뷰 리졸버(view resolver) 등으로 이동시킨다. 

### 5.1.1 스프링 MVC를 이용한 요청 추적
![여러단계의 요청 처리](http://javajigi.net/download/attachments/1160/RequestLifeCycleInSpringMVC.jpg)

 (1) 요청이 브라우저를 떠나면서 사용자가 요구한 내용을 전달하게 된다. 요청의 첫 정거장은 스프링의 DispatcherServlet이다. 대부분의 자바 기반 웹 프레임워크와 마찬가지로 스프링 MVC 역시 많은 요청들을 깔대기처럼 하나의 프런트 컨트롤러 서블릿에서 처리한다. 단일 서블릿이 실제 처리를 수행하기 위해 다른 컴포넌트에 대한 요청 책임을 위임하는 웹 애플리케이션의 일반적 패턴을 제공한다.
 

(3) 적절한 컨트롤러가 선택되면 DispathcerServlet은 선택된 컨트롤러에 요청을 보낸다. 컨트롤러에서 요청은 페이로드(사용자에 의해 입력된 정보)를 떨군다. 컨트롤러에서 처리되는 로직의 결과는 사용자의 브라우저에 표시되기 위한 형태의 정보로 반환된다. 이 정보를 일반적으로 모델이라고 하며, 이런 정보들을 HTML과 같이 사용자 편의성을 갖춘 형태로 전환한다. 이를 위해 정보들에게는 JSP같은 view를 필요로 한다.

(4) 컨트롤러가 하는 마지막 일은 모델을 패키징하는 일과 결과물을 렌더링하기 위한 뷰의 이름을 확인하여 모델과 뷰 이름을 포함하여 다시 DispatcherServlet 에게 요청을 돌려보낸다.

(5) DispathcerServlet은 뷰 리졸버에게 논리적으로 주어진 뷰의 이름과 실제로 구현된 뷰를 매핑해 줄 것을 요청한다.

(6) DispathcerServlet은 결과를 렌더링하기 위한 뷰가 어떤 것인지 알고 있다. 요청의 마지막 여정은 일반적으로 JSP로 모델 데이터를 전달해 주는 뷰의 구현에서 끝이 난다.

### 5.1.2 스프링 MVC 설정하기
#### DispatcherServlet 설정하기
DispatcherServlet은 스프링 MVC의 핵심이다. 요청을 여러 다른 컴포넌트를 통해 라우팅하는 것도 이 DispatcherServlet이 역할이다. 예전에는 DispatcherServlet 같은 서블릿들은 웹 애플리케이션의 WAR 파일 안에 전달되는 web.xml로 설정을 해 왔다. 여기서는 서블릿 컨테이너의 DispatcherServlet을 설정하는데 web.xml 을 사용하는 대신 Java를 사용한다.

